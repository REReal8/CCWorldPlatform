local itemsQuery = {
    ["minecraft:birch_log"] = 1,
    ["minecraft:torch"]     = 5,
}

local callbackFunction = "t_main.Func1_Callback"
local callbackData = {"some callback data"}

function T_TransferItemsFromTo_Turtles()
    corelog.WriteToLog("* Test TransferItemsFromTo_ASrv between turtles:")
    -- create transferData
    local sourceItemsLocator = enterprise_turtle.GetItemsLocator_SSrv({ turtleId = os.getComputerID(), itemsQuery = itemsQuery }).itemsLocator
    local destinationStorageLocator = enterprise_turtle.GetHostLocator_Att()
    local transferData = {
        sourceItemsLocator          = sourceItemsLocator,
        destinationStorageLocator   = destinationStorageLocator,
    }

    -- call test method
    corelog.WriteToLog("  calling enterprise_isp.TransferItemsFromTo_ASrv("..textutils.serialize(transferData)..","..callbackFunction..","..textutils.serialize(callbackData)..")")
    enterprise_isp.TransferItemsFromTo_ASrv(transferData, callbackFunction, callbackData)
end

function T_Can_ProvideItems()
    corelog.WriteToLog("* Test Can_ProvideItems_QSrv for turtles:")
    -- create transferData
    local itemsLocator = enterprise_turtle.GetItemsLocator_SSrv({ turtleId = os.getComputerID(), itemsQuery = itemsQuery }).itemsLocator
    local queryData = {
        itemsLocator = itemsLocator,
    }

    -- call test method
    corelog.WriteToLog("  calling enterprise_isp.Can_ProvideItems_QSrv("..textutils.serialize(queryData)..")")
    local result = enterprise_isp.Can_ProvideItems_QSrv(queryData)
    corelog.WriteToLog("  result="..textutils.serialize(result))
end

function T_GetFuelLevels_Att()
    -- prepare test
    corelog.WriteToLog("# Test GetFuelLevels_Att")
    local forest = enterprise_woods.GetForest()
    local originalForestLevel = forest.forestLevel
    local originalNTrees = forest.nTrees
    enterprise_woods.UpdateForest_SSrv({ forestLevel = 0, nTrees = 1 })
    local location = coremove.GetLocation()
    t_factory.StartNewV0Site(location)

    -- test
    local fuelLevels = enterprise_turtle.GetFuelLevels_Att()
    local fuelLevel_Priority = fuelLevels.fuelLevel_Priority
    local fuelLevel_Assignment = fuelLevels.fuelLevel_Assignment
    corelog.WriteToLog("   "..fuelLevel_Priority.." fuelLevel_Priority")
    corelog.WriteToLog("   "..fuelLevel_Assignment.." fuelLevel_Assignment")

    -- cleanup test
    enterprise_woods.UpdateForest_SSrv({ forestLevel = originalForestLevel, nTrees = originalNTrees })
    t_factory.StopV0Site(location)
end

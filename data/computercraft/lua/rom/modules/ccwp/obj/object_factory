local ObjectFactory = {
    classes = {},
}

local instance = nil
function ObjectFactory:getInstance()
    if not instance then
        instance = setmetatable({}, { __index = ObjectFactory })
    end
    return instance
end

function ObjectFactory:create(className, objectFieldsTable)
--    local corelog = require "corelog"
--    corelog.WriteToLog("about to create "..className.." with "..textutils.serialise(objectFieldsTable))
    local class = self.classes[className]
    if class then
        return class:new(objectFieldsTable)
    else
        return nil
    end
end

function ObjectFactory:registerClass(className, class)
    self.classes[className] = class
end

function ObjectFactory:delistClass(className)
    self.classes[className] = nil
end

return ObjectFactory
